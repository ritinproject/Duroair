{%- set jumbotronTitleElement = jumbotronTitleElement if jumbotronTitleElement else 'h1' -%}
{%- set heroImg = jumbotron.img if jumbotron.img else '/img/heros/hero-default.jpg' -%}
<!-- Bootstrap JS (needed for carousel to work) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  const carousel = document.querySelector('#heroCarousel');

  function playActiveVideo() {
  const slides = carousel.querySelectorAll('.carousel-item');
  const activeSlide = carousel.querySelector('.carousel-item.active');

  slides.forEach(slide => {
    const video = slide.querySelector('video');
    // Only pause non-active videos
    if (video && slide !== activeSlide) {
      video.pause();
      video.currentTime = 0;
    }
  });

  const activeVideo = activeSlide?.querySelector('video');
  if (activeVideo) {
    activeVideo.muted = true;
    activeVideo.playsInline = true;
    activeVideo.play().catch(err => {
      console.warn("Autoplay failed:", err);
    });
  }
}


  // Delay initial video play after page loads
  setTimeout(playActiveVideo, 300);

  // Play video when slide transition finishes
  carousel.addEventListener('slid.bs.carousel', playActiveVideo);
});
</script>


<div id="hero" style="background-image: url('{{heroImg}}');" class="{{waveType}}">
    <div class="container">
        <nav id="breadcrumb" class="custom breadcrumb"></nav>
        <div class="jumbo-content">
            {% if jumbotron.subhead or jumbotron_subhead %}
            <div class="subhead">{{ jumbotron.subhead }}{{jumbotron_subhead}}</div>
            {% endif %}
            {%- if hideJumbotronTitle !== true -%}<{{jumbotronTitleElement}} class="jumbotron-headline">{{ jumbotron.headline if jumbotron.headline else title }}</{{jumbotronTitleElement}}>{%- endif -%}
            <div class="jumbo-tagline">{{ jumbotron.tagline }}</div>
            {%- if jumbotron.ctaUrl -%}
            <a href="{{jumbotron.ctaUrl}}" class="btn {{ jumbotron.ctaCssClass if jumbotron.ctaCssClass else "btn-default" }}" data-ga-event="Button" data-ga-action="Click">{{path}}{{jumbotron.ctaText}}</a>
            {%- endif -%}
        </div>
    </div>
    <div class="hero-overlay">
                {% if layout == 'home.njk' %}
                    <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">

                        <!-- Indicators OUTSIDE carousel-inner -->
                            <div class="carousel-indicators">
                                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
                                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
                                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
                                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="3"></button>
                            </div>

                        <div class="carousel-inner">
                            <!-- Slide 1: Video -->
                            <div class="carousel-item active">
                                <video width="100%" muted autoplay playsinline loop>
                                    <source src="/img/heros/home-hero.mp4" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>

                            <!-- Slide 2: Image -->
                            <div class="carousel-item">
                                <div class="hero-slide-img" style="background-image: url('/img/heros/hero-banner-1.jpg'); background-size: cover; background-position: center; height: 100vh;"></div>
                            </div>

                            <!-- Slide 3: Image -->
                            <div class="carousel-item">
                                <div class="hero-slide-img" style="background-image: url('/img/heros/hero-banner-2.jpg'); background-size: cover; background-position: center; height: 100vh;"></div>
                            </div>

                            <!-- Slide 4: Image -->
                            <div class="carousel-item">  
                                <div class="hero-slide-img" style="background-image: url('/img/heros/hero-banner-3.jpg'); background-size: cover; background-position: center; height: 100vh;"></div>
                            </div>
                        </div>

                    </div>
                {% endif %}

    </div>
</div> <!-- Closing for #hero -->
